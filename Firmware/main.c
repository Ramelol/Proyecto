#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include <irq.h>
#include <uart.h>
#include <console.h>
#include "spiLCD.h"
#include "spiSD.h"
#include <generated/csr.h>

static uint16_t nave3[1155]={
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0010 (16) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0020 (32) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x7CCA, 0x63C8,   // 0x0030 (48) pixels
0x0000, 0x0000, 0x0000, 0x3AC4, 0x64E6, 0x1140, 0x0000, 0x0000, 0x0000, 0x7CAA, 0x7C8A, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0040 (64) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0050 (80) pixels
0x0000, 0xC7AF, 0x7D27, 0x0000, 0x0000, 0x0000, 0x7568, 0x9729, 0x4C83, 0x0000, 0x0000, 0x0020, 0x95E9, 0xC76F, 0x2122, 0x0000,   // 0x0060 (96) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0070 (112) pixels
0x0000, 0x0000, 0x1901, 0xC750, 0xBFC9, 0x8E26, 0x08A0, 0x0000, 0x2241, 0x966A, 0x9729, 0x65A4, 0x08E1, 0x0000, 0x29E1, 0x9EC6,   // 0x0080 (128) pixels
0xBFCB, 0xB6AF, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0090 (144) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xAE6E, 0xB7AA, 0xB7A7, 0xA707, 0x4302, 0x0000, 0x3341, 0x8E4A, 0x8648, 0x6584, 0x2241,   // 0x00A0 (160) pixels
0x0000, 0x6484, 0xB7A8, 0xAFA7, 0xBFCC, 0x956C, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x00B0 (176) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x746A, 0xC7EC, 0x0000, 0xA707, 0xB7C8, 0x7D65, 0x0021, 0x2184, 0x3A48,   // 0x00C0 (192) pixels
0x3247, 0x3227, 0x1103, 0x0000, 0x8E26, 0xB7E8, 0x9EA6, 0x0000, 0xC7CD, 0x4265, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x00D0 (208) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x10C1, 0xBF6E, 0x0000, 0x3A4A, 0x0000, 0xB7C8, 0xA747,   // 0x00E0 (224) pixels
0x0000, 0x5D04, 0xB76D, 0x970A, 0x76C5, 0x4C43, 0x0000, 0xB7A7, 0xB7C8, 0x0000, 0x42CB, 0x0000, 0xB6CD, 0x0000, 0x0000, 0x0000,   // 0x00F0 (240) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0021, 0x95AC, 0xBFC9, 0x0000, 0x534F,   // 0x0100 (256) pixels
0x0000, 0xB7C8, 0xB7C8, 0x9EE7, 0x0000, 0x95AB, 0x8E4A, 0x4C83, 0x0000, 0xAF47, 0xB7C8, 0xB7E8, 0x0000, 0x5BB0, 0x0000, 0xBFEB,   // 0x0110 (272) pixels
0x6BE8, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x1902, 0xBF8C,   // 0x0120 (288) pixels
0x0000, 0x63F1, 0x5BB0, 0x0000, 0xAF87, 0xB7C8, 0xB7C8, 0xAF67, 0x0000, 0x0000, 0x0000, 0xAFA7, 0xB7C8, 0xB7C8, 0xA727, 0x0000,   // 0x0130 (304) pixels
0x5BD0, 0x5BB0, 0x0000, 0xB70D, 0x0020, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0140 (320) pixels
0x0862, 0x8D4C, 0xBFE9, 0x0000, 0x6C53, 0x6412, 0x0000, 0xA727, 0xB7C8, 0xB7A8, 0xA6E7, 0x9626, 0x7525, 0x9686, 0xA707, 0xB7C8,   // 0x0150 (336) pixels
0xB7C8, 0x9EA7, 0x0000, 0x6C32, 0x6C32, 0x0000, 0xBFEB, 0x5B47, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0160 (352) pixels
0x0000, 0x0000, 0x0000, 0x0020, 0xB72C, 0x0000, 0x5BB0, 0x6C52, 0x6C32, 0x0000, 0xA727, 0xB7E8, 0xB787, 0xA6E7, 0x9666, 0x7D45,   // 0x0170 (368) pixels
0x9EA6, 0xA707, 0xB7A8, 0xB7E8, 0x9EA7, 0x0000, 0x6C53, 0x6C53, 0x534D, 0x0000, 0xAE8C, 0x0041, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0180 (384) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x63A8, 0xBFEA, 0x0000, 0x6C32, 0x6C32, 0x5BB0, 0x0000, 0xA6E7, 0x9EC7, 0x9626,   // 0x0190 (400) pixels
0x9646, 0x9646, 0x7D45, 0x9686, 0x9626, 0x9626, 0xA707, 0x9EA7, 0x0000, 0x63D1, 0x6C32, 0x63F1, 0x0000, 0xBFAB, 0x31E4, 0x0000,   // 0x01A0 (416) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0880, 0x2163, 0x10C1, 0x9E0C, 0x0000, 0x536B, 0x6411, 0x0000, 0x0000, 0x8E07,   // 0x01B0 (432) pixels
0xAF67, 0xA707, 0x9647, 0x8DC9, 0x0000, 0x0000, 0x0000, 0x8DC8, 0x9E67, 0xAF47, 0xAF67, 0x85A7, 0x0000, 0x0000, 0x6411, 0x6447,   // 0x01C0 (448) pixels
0x0000, 0x7C8A, 0x1902, 0x2163, 0x0020, 0x0000, 0x0000, 0x0000, 0x0020, 0x9DAD, 0xAEAE, 0x5346, 0xBF2D, 0x0000, 0x4B2D, 0x0000,   // 0x01D0 (464) pixels
0x7D47, 0xA727, 0xA6E7, 0x0000, 0x0000, 0x0000, 0x0000, 0xADB7, 0xADD8, 0xA5B7, 0x0000, 0x0000, 0x0000, 0x0000, 0xA727, 0x9EC7,   // 0x01E0 (480) pixels
0x6CC8, 0x0000, 0x4B2A, 0x0000, 0xAE6D, 0x6C48, 0xAE8E, 0x84EB, 0x0000, 0x0000, 0x0000, 0x5B47, 0xBF6F, 0x9749, 0x3AC4, 0xBFAC,   // 0x01F0 (496) pixels
0x8E26, 0x0000, 0x8E06, 0xB7C8, 0x9647, 0x0000, 0x9D56, 0xBE5A, 0xCEDC, 0xD6FC, 0xD71D, 0xDF1D, 0xD6FD, 0xD6FC, 0xCEBB, 0xBE39,   // 0x0200 (512) pixels
0x9514, 0x0000, 0x9EA7, 0xB7A8, 0x8567, 0x0000, 0xAF47, 0xBF2D, 0x4BE5, 0x9F4A, 0xBF4F, 0x2983, 0x0000, 0x0000, 0x9E0D, 0x8F08,   // 0x0210 (528) pixels
0x5D04, 0x4B06, 0xBFCB, 0x7D65, 0x8E06, 0xB7C8, 0x85C7, 0x0000, 0xBE39, 0xD6DC, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D,   // 0x0220 (544) pixels
0xDF1D, 0xDF1D, 0xDF1D, 0xCEBB, 0xB5F8, 0x0000, 0x9647, 0xB7A8, 0x7D65, 0x9666, 0xBFAD, 0x2A22, 0x5D64, 0x9F4A, 0x7C8A, 0x0000,   // 0x0230 (560) pixels
0x0040, 0xAF0D, 0x65C4, 0x948F, 0x6C29, 0xC7CC, 0xA707, 0xB7C8, 0x85C7, 0x0000, 0xC67A, 0xD71D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D,   // 0x0240 (576) pixels
0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xD6FD, 0xDF1D, 0xD6FC, 0xB639, 0x0000, 0x9666, 0xB7A8, 0xA747, 0xC7CE, 0x4266, 0x7C0D,   // 0x0250 (592) pixels
0x7EA6, 0xA64D, 0x0000, 0x1922, 0xA74C, 0x65A4, 0x94B0, 0x84EA, 0xCFD0, 0xC7CC, 0x9EA7, 0x0000, 0xBE7A, 0xDF1D, 0xDF1D, 0xDF1D,   // 0x0260 (608) pixels
0xDF1D, 0xDEFD, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDEFD, 0xDF1D, 0xDF1D, 0xDF1D, 0xD71D, 0xB639, 0x0000, 0xAF28, 0xC7CD,   // 0x0270 (624) pixels
0xD7F1, 0x4AC7, 0x842E, 0x7685, 0xAF0D, 0x0020, 0x4285, 0x9F2A, 0x76C5, 0x4C43, 0x8D6C, 0xD7D1, 0xC7CC, 0x0000, 0xADF8, 0xDF1D,   // 0x0280 (640) pixels
0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xD6FC,   // 0x0290 (656) pixels
0x9D96, 0x0000, 0xC7EE, 0xD7D2, 0x5B47, 0x5D24, 0x7EE5, 0xA72B, 0x10C2, 0x63E8, 0x8F28, 0x7EE5, 0x5D44, 0x8D2B, 0xCFD0, 0x9EC7,   // 0x02A0 (672) pixels
0x0000, 0xCEDC, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xD6FD, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D,   // 0x02B0 (688) pixels
0xDF1D, 0xDF1D, 0xDF1D, 0xC69B, 0x0000, 0xB788, 0xD7D1, 0x5306, 0x6E25, 0x7EE5, 0x9F2A, 0x2143, 0x7489, 0x8706, 0x6E45, 0x7BEC,   // 0x02C0 (704) pixels
0x7429, 0xCFCF, 0x0000, 0x9D76, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xD71D, 0xCEDC, 0xCEBB, 0xD6DC, 0xDF1D,   // 0x02D0 (720) pixels
0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xD6FC, 0x84D3, 0x0000, 0xCFD0, 0x4AA7, 0x5B69, 0x7EE5, 0x8F28, 0x3A24, 0x7CE9,   // 0x02E0 (736) pixels
0x7EE5, 0x65E4, 0x9CF0, 0x4AC7, 0xC7CE, 0x0000, 0x9D76, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xD6FD, 0xCEBB, 0xB639, 0xADF8,   // 0x02F0 (752) pixels
0xADF7, 0xADF8, 0xBE59, 0xCEBB, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xDF1D, 0xD6FC, 0x8CF4, 0x0000, 0xC76E, 0x5AEA, 0x6B6B, 0x7EE5,   // 0x0300 (768) pixels
0x8707, 0x4AC5, 0x6D07, 0x7EE5, 0x7F05, 0x54E3, 0x2221, 0xB72C, 0x9666, 0x0000, 0xCEDC, 0xDF1D, 0xDF1D, 0xDF1D, 0xCEDC, 0xB618,   // 0x0310 (784) pixels
0xA5D7, 0xA5B7, 0xA5D7, 0xA5D7, 0xA5D7, 0xA5D7, 0xA5D7, 0xB639, 0xD6FC, 0xDF1D, 0xDF1D, 0xDF1D, 0xC69A, 0x0000, 0xAF67, 0xA64C,   // 0x0320 (800) pixels
0x2AE1, 0x6584, 0x7EE5, 0x7F06, 0x4B25, 0x5424, 0x6584, 0x6584, 0x6584, 0x4C83, 0x6C07, 0xB7E8, 0x5BE7, 0x0000, 0xCEDC, 0xD6FD,   // 0x0330 (816) pixels
0xC67A, 0xA5D7, 0xA5D7, 0xA5B7, 0xA5D7, 0xA5D7, 0xA5D7, 0xA5D7, 0xA5B7, 0xA5D7, 0xA5D7, 0xADF8, 0xC69B, 0xD6FD, 0xCEBB, 0x0000,   // 0x0340 (832) pixels
0x74E5, 0xB7A8, 0x3A25, 0x6564, 0x6564, 0x6584, 0x6584, 0x3AC4, 0x0000, 0x0000, 0x54C3, 0x6584, 0x6584, 0x43E2, 0x8DE6, 0xB7A7,   // 0x0350 (848) pixels
0x5BE7, 0x0000, 0xA5B7, 0xA5D7, 0xA5D7, 0xA5B7, 0xA5D7, 0xA5D7, 0xA5D7, 0xA5D7, 0xA5D7, 0xA5D7, 0xA5D7, 0xA5B7, 0xA5D7, 0xA5D7,   // 0x0360 (864) pixels
0xA5B7, 0x0000, 0x6CA6, 0xB7C8, 0x6CC4, 0x54C3, 0x6584, 0x6584, 0x43C2, 0x0000, 0x0000, 0x0000, 0x0000, 0x6DE4, 0x7EE5, 0x7EE5,   // 0x0370 (880) pixels
0x7F05, 0x4402, 0x7525, 0xB788, 0x8E06, 0x5BA8, 0x7C51, 0x8D14, 0x9D76, 0x9D96, 0xA5B7, 0xA5B7, 0xA5B7, 0xA5B7, 0x9DB7, 0x9D96,   // 0x0380 (896) pixels
0x9555, 0x8CF4, 0x7410, 0x6407, 0x9E86, 0xAF47, 0x5C03, 0x54E3, 0x7F05, 0x7EE5, 0x7EE5, 0x54C3, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0390 (912) pixels
0x3301, 0x3B82, 0x3B62, 0x7665, 0x7F05, 0x54E3, 0x0000, 0x0000, 0xAEE8, 0x9EC7, 0x85E6, 0x7526, 0x6CC7, 0x6C68, 0x6429, 0x6409,   // 0x03A0 (928) pixels
0x6428, 0x6C87, 0x6CC6, 0x7D46, 0x8E06, 0xA6E7, 0xA6C7, 0x0000, 0x0000, 0x6DE4, 0x7EE5, 0x65C4, 0x3B82, 0x3B82, 0x2241, 0x0000,   // 0x03B0 (944) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x1120, 0x6E65, 0x76C5, 0x0000, 0x532E, 0x42CC, 0x0000, 0x0000, 0x0000, 0x42E3, 0x4B63,   // 0x03C0 (960) pixels
0x5383, 0x53A3, 0x53A3, 0x53A3, 0x5383, 0x4B63, 0x3AC3, 0x0000, 0x0000, 0x0000, 0x4AEC, 0x4B0D, 0x0000, 0x7EE5, 0x65C4, 0x0020,   // 0x03D0 (976) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x1100, 0x0000, 0x4B2D, 0x532E, 0x4B2D, 0x4B2D, 0x534E,   // 0x03E0 (992) pixels
0x42EC, 0x0000, 0xBFE8, 0xBFE8, 0xBFE8, 0xBFE8, 0xBFE8, 0xBFE8, 0xBFE8, 0x0000, 0x4B0D, 0x534E, 0x4B2D, 0x532E, 0x4B2D, 0x4B0D,   // 0x03F0 (1008) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x5BB0, 0x5B90,   // 0x0400 (1024) pixels
0x5BB0, 0x5BB0, 0x5BB0, 0x0000, 0x9666, 0xAF67, 0xAF67, 0xAF67, 0xAF67, 0xAF67, 0xAF67, 0xAF68, 0x8DE6, 0x0000, 0x5BB0, 0x5BB0,   // 0x0410 (1040) pixels
0x5B90, 0x5BB0, 0x536F, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0420 (1056) pixels
0x0000, 0x0000, 0x0000, 0x0020, 0x0000, 0x0000, 0x3B42, 0x3B42, 0x3B42, 0x3B42, 0x3B42, 0x3B42, 0x3B42, 0x3B42, 0x3B42, 0x3B42,   // 0x0430 (1072) pixels
0x3342, 0x0000, 0x0000, 0x0041, 0x0841, 0x0021, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0440 (1088) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x6BE8, 0xB78D, 0x8727, 0x8726, 0x8726, 0x8726, 0x7F05, 0x7F05, 0x7F05,   // 0x0450 (1104) pixels
0x7F26, 0x8726, 0x8726, 0x8F28, 0xB76E, 0x31E4, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0460 (1120) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x84EB, 0xA60D, 0x9E0D, 0x9E0D, 0x95EC,   // 0x0470 (1136) pixels
0x6D86, 0x5D64, 0x7587, 0x9E0C, 0x9E0D, 0x9E0D, 0xA60D, 0x7449, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0480 (1152) pixels
};
 
static uint16_t nave2[948] = {
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0010 (16) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0020 (32) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0030 (48) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x39E6, 0x2964, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0040 (64) pixels
0x39A2, 0x39A6, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0050 (80) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0060 (96) pixels
0x39E5, 0x31A5, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x3164, 0x39C6, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0070 (112) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x39A4, 0x0000, 0x0000, 0x0000,   // 0x0080 (128) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x4207, 0x41E6, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0090 (144) pixels
0x0000, 0x0000, 0x0000, 0x39C3, 0x39C6, 0x39C6, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x00A0 (160) pixels
0x0000, 0x0000, 0x3164, 0x0000, 0x0000, 0x4A47, 0x4202, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x2102, 0x3181, 0x0000, 0x0000,   // 0x00B0 (176) pixels
0x0000, 0x39E4, 0x41E7, 0x3164, 0x0000, 0x0000, 0x0000, 0x59E3, 0x82C5, 0x0000, 0x0000, 0x0000, 0x2943, 0x3185, 0x39E6, 0x0000,   // 0x00C0 (192) pixels
0x0000, 0x0000, 0x5243, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x39A4, 0x4A47, 0x0000, 0x0000, 0x41E7, 0x41E6,   // 0x00D0 (208) pixels
0x5AA2, 0x0000, 0x0000, 0x0000, 0x3182, 0x2102, 0x4A21, 0x0000, 0x0000, 0x0000, 0x4226, 0x41E7, 0x3164, 0x0000, 0x0000, 0x3162,   // 0x00E0 (224) pixels
0x7244, 0x9326, 0x49A3, 0x0000, 0x0000, 0x20E2, 0x39A5, 0x4207, 0x0000, 0x0000, 0x0000, 0x5283, 0x41E2, 0x0000, 0x0000, 0x0000,   // 0x00F0 (240) pixels
0x0000, 0x0000, 0x4A22, 0x41E6, 0x41E7, 0x0000, 0x0000, 0x39C6, 0x62A8, 0x41E4, 0x0000, 0x0000, 0x0000, 0x2944, 0x2922, 0x5AA2,   // 0x0100 (256) pixels
0x0000, 0x0000, 0x0000, 0x39C7, 0x4207, 0x2944, 0x0000, 0x9B67, 0x3962, 0x7AC5, 0xA427, 0x49A3, 0x7285, 0x0000, 0x5A44, 0x4207,   // 0x0110 (272) pixels
0x3A07, 0x0000, 0x0000, 0x0000, 0x41E1, 0x5242, 0x2104, 0x0000, 0x0000, 0x0000, 0x0000, 0x41E6, 0x4A27, 0x4227, 0x0000, 0x0000,   // 0x0120 (288) pixels
0x4205, 0x5245, 0x41E6, 0x0000, 0x0000, 0x0000, 0x2143, 0x2922, 0x5282, 0x0000, 0x0000, 0x0000, 0x31A6, 0x41E7, 0x0000, 0x9367,   // 0x0130 (304) pixels
0xA387, 0x5A44, 0x7AA5, 0x9B66, 0x4983, 0x8B26, 0xA388, 0x0000, 0x4A07, 0x39E7, 0x0000, 0x0000, 0x0000, 0x39A3, 0x4A42, 0x2123,   // 0x0140 (320) pixels
0x0000, 0x0000, 0x0000, 0x3183, 0x5247, 0x4225, 0x0000, 0x0000, 0x0000, 0x39A5, 0x4207, 0x4207, 0x41E5, 0x0000, 0x0000, 0x0000,   // 0x0150 (336) pixels
0x2121, 0x5262, 0x0000, 0x0000, 0x0000, 0x39C7, 0x41E7, 0x0000, 0x8B26, 0x9B67, 0x6AA4, 0x9B47, 0x9B47, 0x59E4, 0x8B26, 0x9B68,   // 0x0160 (352) pixels
0x0000, 0x41E7, 0x41E7, 0x0000, 0x0000, 0x0000, 0x2964, 0x39A1, 0x2123, 0x0000, 0x0000, 0x41E3, 0x4A27, 0x39C7, 0x4228, 0x0000,   // 0x0170 (368) pixels
0x0000, 0x0000, 0x41E3, 0x4A49, 0x4206, 0x62C8, 0x0000, 0x0000, 0x3942, 0x0000, 0x41E2, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0180 (384) pixels
0x41C3, 0x9367, 0x9B47, 0x9B47, 0x9B47, 0xB508, 0x9B47, 0x9B47, 0xA368, 0x72A5, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x2943,   // 0x0190 (400) pixels
0x3181, 0x0000, 0x0000, 0x0000, 0x4A06, 0x5A88, 0x4207, 0x31A6, 0x0000, 0x0000, 0x0000, 0x5AA3, 0x41E7, 0x4226, 0x5228, 0x41C6,   // 0x01A0 (416) pixels
0x0000, 0x7AA5, 0x3102, 0x0000, 0x4184, 0x3964, 0x49A3, 0x7AE5, 0xA387, 0x7AE6, 0x9B47, 0x9B67, 0x9B47, 0x9B47, 0xA386, 0x9B47,   // 0x01B0 (432) pixels
0x9B47, 0x9B47, 0x9B47, 0x9B67, 0xA366, 0x72C5, 0x0000, 0x0000, 0x4184, 0x0000, 0x59E3, 0x7AA5, 0x0000, 0x5248, 0x41E6, 0x4A48,   // 0x01C0 (448) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x4A69, 0x39E7, 0x4A27, 0x20C1, 0x0000, 0x8B86, 0x7285, 0x9B67, 0x9347, 0x8B06,   // 0x01D0 (464) pixels
0xB4C7, 0x8B47, 0x9B47, 0x9B47, 0x7AA6, 0x9306, 0xB3C8, 0xA3A7, 0xAB87, 0x8AC6, 0x9B47, 0x41A5, 0x9B47, 0xAC48, 0xA447, 0x7AC6,   // 0x01E0 (480) pixels
0xA367, 0x0000, 0x72E5, 0x9366, 0x0000, 0x39A5, 0x4A27, 0x4228, 0x5289, 0x0000, 0x0000, 0x0000, 0x0000, 0x5AA3, 0x4202, 0x0000,   // 0x01F0 (496) pixels
0x39A5, 0x39A5, 0x2924, 0x0000, 0xA427, 0x8B26, 0x8B06, 0x7AE7, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x9306, 0xABA7, 0xAC48,   // 0x0200 (512) pixels
0xC5A8, 0xABC8, 0xA387, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x8306, 0x82C5, 0x9BE6, 0x0000, 0x2943, 0x41C6, 0x3183,   // 0x0210 (528) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x5A64, 0x7AE5, 0x0000, 0x0000, 0x0000, 0x49C4, 0x7AA5, 0x9326, 0x72A6,   // 0x0220 (544) pixels
0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x9306, 0xA347, 0x0000, 0x0000, 0x0000, 0x9306, 0xA387, 0x9B47, 0x9B47, 0x9B47,   // 0x0230 (560) pixels
0x9B47, 0x9B47, 0x9B47, 0x82A5, 0x9326, 0x0000, 0x20E2, 0x3964, 0x0000, 0x9B47, 0x9B47, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0240 (576) pixels
0x5283, 0x7324, 0xA3C6, 0xA3A8, 0x59E4, 0x7265, 0x8AE6, 0x9B47, 0xCE0A, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x82A6,   // 0x0250 (592) pixels
0x0000, 0x9408, 0xAD29, 0xACC9, 0x0000, 0x9327, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0xCE0A, 0xCE0A, 0xCE0A, 0x82E6, 0x82A6, 0x0000,   // 0x0260 (608) pixels
0x0000, 0x9B47, 0x9B47, 0x9B47, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x5204, 0x9B68, 0x9B88, 0x6A45, 0x9B47, 0x9B47,   // 0x0270 (624) pixels
0xCE0A, 0xCE0A, 0xCE0A, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x82E6, 0x0000, 0x51E6, 0xBD8A, 0xCE0A, 0xBDAA, 0x9448, 0x0000, 0x8AE7,   // 0x0280 (640) pixels
0x9B47, 0x9B47, 0xCE0A, 0xCE0A, 0xCE0A, 0xCE0A, 0xCE0A, 0x9B67, 0x6224, 0x82E7, 0x9B47, 0x9B47, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0290 (656) pixels
0x0000, 0x0000, 0x0000, 0x39C2, 0x82E7, 0x9B88, 0xABA8, 0x9B47, 0x9B47, 0x9B47, 0xCE0A, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x9B47,   // 0x02A0 (672) pixels
0x8386, 0x82E6, 0x0000, 0x9468, 0xBD89, 0xAD29, 0x0000, 0x8347, 0x8346, 0x9347, 0x9B47, 0x9B47, 0x9B47, 0xCE0A, 0xCE0A, 0x9B47,   // 0x02B0 (688) pixels
0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x59E4, 0x9366, 0x9B86,   // 0x02C0 (704) pixels
0xA367, 0x82C6, 0x9B47, 0xCE0A, 0x9B47, 0xABC8, 0x9B67, 0x3963, 0x9B47, 0x6B05, 0x7AA5, 0xA367, 0x0000, 0x0000, 0x0000, 0x8B07,   // 0x02D0 (720) pixels
0x6AC5, 0x6AC5, 0x9B47, 0x3962, 0x9B67, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x0000, 0x0000, 0x0000,   // 0x02E0 (736) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x4A22, 0x7323, 0xA425, 0x9346, 0x8B06, 0x9B47, 0x9B47, 0x9B47, 0x9B47, 0x9B47,   // 0x02F0 (752) pixels
0x9B47, 0x0000, 0x9B47, 0x9B47, 0xAC07, 0x9367, 0x3963, 0xB428, 0x9B66, 0x9B47, 0x9B47, 0x0000, 0x6203, 0xABA7, 0x9B47, 0x9B47,   // 0x0300 (768) pixels
0x9B47, 0x9B47, 0x9326, 0x9B47, 0x9B47, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0310 (784) pixels
0x4A23, 0x6264, 0xA465, 0x9386, 0x8B06, 0x9B47, 0x9B47, 0xA405, 0xA347, 0x0000, 0x0000, 0x39C2, 0x9B47, 0x9B47, 0x9B47, 0x3983,   // 0x0320 (800) pixels
0xA487, 0x9B47, 0x9B47, 0x0000, 0x0000, 0x0000, 0x8B05, 0x9B47, 0xAC85, 0x8AE6, 0x9B47, 0x9B47, 0x9B47, 0x0000, 0x0000, 0x0000,   // 0x0330 (816) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x41C2, 0x6A65, 0x8AE6, 0x6225, 0x6A84,   // 0x0340 (832) pixels
0x6244, 0x5A03, 0x0000, 0x0000, 0x5263, 0x49C3, 0x9B47, 0x9B47, 0x49E3, 0x9B47, 0x9B47, 0x0000, 0x0000, 0x0000, 0x0000, 0x49A3,   // 0x0350 (848) pixels
0x6264, 0x9B47, 0x9B47, 0x9B47, 0x6265, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0360 (864) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x9B47, 0x9B47, 0x9B47, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x4A23, 0x7AA5,   // 0x0370 (880) pixels
0x9B47, 0x9B47, 0x9B47, 0x6224, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x9B47, 0x9B47, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0380 (896) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0390 (912) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x49E3, 0x7A85, 0x9B47, 0x6A44, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x03A0 (928) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x7BA2,   // 0x03B0 (944) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x03C0 (960) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x03D0 (976) pixels
}; 

static uint16_t exp[899] ={
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0020, 0x0020, 0x0020, 0x0020, 0x0020,   // 0x0010 (16) pixels
0x0020, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0020 (32) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x7080, 0x8080, 0x8080, 0x8080, 0xA100, 0xA100,   // 0x0030 (48) pixels
0x0020, 0x0020, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0040 (64) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x9100, 0xA100, 0x9100, 0xB180, 0xB180, 0xB180, 0xD180, 0xD180,   // 0x0050 (80) pixels
0xB180, 0xB180, 0x0020, 0x0020, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0060 (96) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0020, 0x9100, 0xA100, 0xD180, 0xE200, 0xE200, 0xF280, 0xF280, 0xE200, 0xE200,   // 0x0070 (112) pixels
0xD180, 0xB180, 0x9100, 0x8080, 0x0020, 0x0020, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0080 (128) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0020, 0x0020, 0xB180, 0xB180, 0xF280, 0xF480, 0xF480, 0xF480, 0xF380, 0xF380, 0xE200, 0xF280,   // 0x0090 (144) pixels
0xE200, 0xB180, 0x8080, 0x7080, 0x0020, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x00A0 (160) pixels
0x0000, 0x0000, 0x9100, 0x9100, 0xB180, 0xB180, 0xE200, 0xF380, 0xF380, 0xF380, 0xF380, 0xF380, 0xF380, 0xF380, 0xF480, 0xF480,   // 0x00B0 (176) pixels
0xF280, 0xB180, 0x8080, 0x0020, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0020,   // 0x00C0 (192) pixels
0x0020, 0x9100, 0x9100, 0xB180, 0xB180, 0xE200, 0xF380, 0xF380, 0xF380, 0xF380, 0xF380, 0xF380, 0xF380, 0xF480, 0xF480, 0xF280,   // 0x00D0 (208) pixels
0xB180, 0x8080, 0x0020, 0x0020, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0020, 0x0020, 0x7080, 0x4000,   // 0x00E0 (224) pixels
0x8080, 0xA100, 0xA100, 0xD180, 0xF480, 0xF380, 0xF480, 0xF480, 0xF280, 0xF380, 0xF480, 0xF480, 0xF4C0, 0xF500, 0xF560, 0xF480,   // 0x00F0 (240) pixels
0xA100, 0x6000, 0x0020, 0x0020, 0x0020, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0020, 0x0020, 0x7080, 0x7080, 0x8080, 0x9100,   // 0x0100 (256) pixels
0xA100, 0xB180, 0xF480, 0xF560, 0xF5A0, 0xF560, 0xF560, 0xF500, 0xF500, 0xF500, 0xF480, 0xF480, 0xF5A0, 0xFE40, 0xF5E0, 0xF480,   // 0x0110 (272) pixels
0x8080, 0x4000, 0x4000, 0x6000, 0x2000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0020, 0x0020, 0x6000, 0xB180, 0xD180, 0xD180, 0xD180,   // 0x0120 (288) pixels
0xF280, 0xF4C0, 0xFEC3, 0xFF07, 0xFF07, 0xFF07, 0xFF07, 0xF5E0, 0xF5A0, 0xF480, 0xF380, 0xF4C0, 0xFEC3, 0xFF07, 0xF4C0, 0xE200,   // 0x0130 (304) pixels
0x7080, 0x7080, 0x6000, 0x3000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0020, 0x0020, 0x8080, 0xD180, 0xF380, 0xF280, 0xE200, 0xF280,   // 0x0140 (320) pixels
0xF500, 0xFF07, 0xFF07, 0xFFB2, 0xFFB2, 0xFE80, 0xF5A0, 0xF500, 0xF480, 0xF380, 0xF4C0, 0xFE40, 0xFF07, 0xF560, 0xF280, 0xA100,   // 0x0150 (336) pixels
0xA100, 0x8080, 0x8080, 0x2000, 0x0000, 0x0000, 0x0020, 0x0020, 0x0020, 0xB180, 0xF380, 0xF280, 0xF280, 0xE200, 0xF380, 0xF4C0,   // 0x0160 (352) pixels
0xFE80, 0xFEC3, 0xFE40, 0xFE40, 0xF5E0, 0xF4C0, 0xF480, 0xF380, 0xF280, 0xF480, 0xF5E0, 0xFE80, 0xF500, 0xF280, 0xD180, 0xD180,   // 0x0170 (368) pixels
0x9100, 0x8080, 0x2000, 0x0020, 0x0020, 0x0020, 0x9100, 0x9100, 0xF380, 0xF280, 0xE200, 0xD180, 0xF380, 0xF380, 0xF480, 0xF5A0,   // 0x0180 (384) pixels
0xF500, 0xF560, 0xF560, 0xF480, 0xF480, 0xF480, 0xF280, 0xF280, 0xF380, 0xF4C0, 0xFE80, 0xF4C0, 0xF480, 0xF280, 0xF280, 0xB180,   // 0x0190 (400) pixels
0x7080, 0x3000, 0x0020, 0x0020, 0x7080, 0x9100, 0x9100, 0xF380, 0xF280, 0xA100, 0xE200, 0xF480, 0xF480, 0xF480, 0xF480, 0xF4C0,   // 0x01A0 (416) pixels
0xF380, 0xF380, 0xF380, 0xF380, 0xF480, 0xF480, 0xF480, 0xF480, 0xF4C0, 0xF5A0, 0xF560, 0xF480, 0xF480, 0xF480, 0xE200, 0x8080,   // 0x01B0 (432) pixels
0x2000, 0x0020, 0x0020, 0x9100, 0x9100, 0x9100, 0xE200, 0xD180, 0xA100, 0xE200, 0xF380, 0xF380, 0xE200, 0xF480, 0xF280, 0xF380,   // 0x01C0 (448) pixels
0xF380, 0xD180, 0xE200, 0xF380, 0xF560, 0xF500, 0xF500, 0xF560, 0xF560, 0xF4C0, 0xF4C0, 0xF480, 0xF480, 0xF280, 0x9100, 0x3000,   // 0x01D0 (464) pixels
0x0020, 0x2000, 0x0020, 0x7080, 0x7080, 0xA100, 0xA100, 0xA100, 0xD180, 0xF280, 0xF280, 0xE200, 0xE200, 0xF280, 0xD180, 0xD180,   // 0x01E0 (480) pixels
0xA100, 0xA100, 0xF280, 0xF4C0, 0xF560, 0xFE40, 0xFE40, 0xF560, 0xF480, 0xF480, 0xF480, 0xF480, 0xF280, 0xB180, 0x3000, 0x0020,   // 0x01F0 (496) pixels
0x0000, 0x0020, 0x7080, 0x7080, 0xA100, 0xD180, 0xD180, 0xE200, 0xF380, 0xF480, 0xF380, 0xE200, 0xE200, 0xD180, 0xD180, 0xA100,   // 0x0200 (512) pixels
0xB180, 0xF380, 0xF4C0, 0xF5E0, 0xFF4B, 0xFF8F, 0xF5A0, 0xF480, 0xF480, 0xF480, 0xF480, 0xF280, 0xA100, 0x6000, 0x0020, 0x0000,   // 0x0210 (528) pixels
0x2000, 0x8080, 0x8080, 0xD180, 0xE200, 0xE200, 0xF280, 0xF480, 0xF500, 0xF480, 0xF380, 0xF280, 0xD180, 0xD180, 0xD180, 0xF380,   // 0x0220 (544) pixels
0xF480, 0xF5A0, 0xFE40, 0xFF8F, 0xFF4B, 0xF5A0, 0xF4C0, 0xF4C0, 0xF480, 0xF480, 0xE200, 0xB180, 0x7080, 0x0020, 0x0000, 0x0020,   // 0x0230 (560) pixels
0x8080, 0x8080, 0xB180, 0xD180, 0xD180, 0xD180, 0xF380, 0xF4C0, 0xF4C0, 0xF480, 0xF480, 0xF480, 0xF480, 0xF380, 0xF4C0, 0xF560,   // 0x0240 (576) pixels
0xF5A0, 0xF5E0, 0xFEC3, 0xF5A0, 0xF500, 0xF500, 0xF500, 0xF280, 0xF280, 0xD180, 0xA100, 0x9100, 0x0020, 0x0000, 0x0020, 0x7080,   // 0x0250 (592) pixels
0x7080, 0x8080, 0xB180, 0xA100, 0xB180, 0xD180, 0xF480, 0xF4C0, 0xF480, 0xF480, 0xF480, 0xF480, 0xF480, 0xF480, 0xF480, 0xF4C0,   // 0x0260 (608) pixels
0xF500, 0xF480, 0xF380, 0xF280, 0xF380, 0xF280, 0xA100, 0xA100, 0x7080, 0xA100, 0x0020, 0x0000, 0x0000, 0x0000, 0x0000, 0x0020,   // 0x0270 (624) pixels
0x7080, 0x9100, 0xD180, 0xB180, 0xE200, 0xF280, 0xF480, 0xF380, 0xF380, 0xF480, 0xF480, 0xF380, 0xF380, 0xF380, 0xF480, 0xF380,   // 0x0280 (640) pixels
0xE200, 0xA100, 0x9100, 0xB180, 0xB180, 0x8080, 0x8080, 0x7080, 0x0020, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0020, 0x7080,   // 0x0290 (656) pixels
0x8080, 0xB180, 0xD180, 0xB180, 0xE200, 0xE200, 0xE200, 0xF280, 0xF380, 0xF380, 0xF480, 0xF480, 0xF280, 0xF280, 0xF280, 0xA100,   // 0x02A0 (672) pixels
0xA100, 0xB180, 0xB180, 0xD180, 0x7080, 0x7080, 0x9100, 0x0020, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0020, 0x7080, 0x8080,   // 0x02B0 (688) pixels
0xB180, 0xD180, 0xB180, 0xE200, 0xE200, 0xE200, 0xF280, 0xF380, 0xF380, 0xF480, 0xF480, 0xF280, 0xF280, 0xF280, 0xA100, 0xA100,   // 0x02C0 (704) pixels
0xB180, 0xB180, 0xD180, 0x7080, 0x7080, 0x9100, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0020, 0x8080, 0x7080, 0x8080,   // 0x02D0 (720) pixels
0xA100, 0xB180, 0xB180, 0xE200, 0xE200, 0xE200, 0xF280, 0xF280, 0xF380, 0xF480, 0xF380, 0xF280, 0xE200, 0xD180, 0xB180, 0xE200,   // 0x02E0 (736) pixels
0xE200, 0xA100, 0x8080, 0x8080, 0x0020, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0020, 0x0020, 0x9100, 0x8080,   // 0x02F0 (752) pixels
0x9100, 0xA100, 0xB180, 0xF280, 0xF380, 0xF380, 0xF380, 0xF480, 0xF4C0, 0xF480, 0xE200, 0xF280, 0xD180, 0xE200, 0xE200, 0xB180,   // 0x0300 (768) pixels
0x9100, 0x4000, 0x4000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0020, 0x0020, 0x0020,   // 0x0310 (784) pixels
0x8080, 0xA100, 0xD180, 0xF280, 0xF380, 0xF380, 0xF480, 0xF480, 0xF380, 0xE200, 0xD180, 0xE200, 0xD180, 0xA100, 0xA100, 0x0020,   // 0x0320 (800) pixels
0x0020, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0330 (816) pixels
0xA100, 0xB180, 0xD180, 0xD180, 0xD180, 0xE200, 0xF280, 0xF280, 0xD180, 0xE200, 0xB180, 0x7080, 0x0020, 0x0020, 0x0020, 0x0000,   // 0x0340 (832) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0020,   // 0x0350 (848) pixels
0xB180, 0xA100, 0xA100, 0xA100, 0xB180, 0xB180, 0xD180, 0x0000, 0x0000, 0x0000, 0x0020, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0360 (864) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0020,   // 0x0370 (880) pixels
0x0020, 0x0020, 0x0020, 0x0020, 0x0020, 0x0020, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0380 (896) pixels
};

static uint16_t g_over[864] ={
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0010 (16) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0020 (32) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0800, 0xB945, 0xB946, 0xB945, 0xB945, 0xB945, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0030 (48) pixels
0x0000, 0x78E4, 0xB966, 0x2882, 0x0000, 0x0000, 0x0000, 0xB945, 0xB945, 0x0000, 0x0000, 0x0000, 0x0000, 0xB945, 0xB945, 0x1800,   // 0x0040 (64) pixels
0xB945, 0xB945, 0xB945, 0xB945, 0xB945, 0xB946, 0xB945, 0x0000, 0x0000, 0x6883, 0xA0C4, 0xB945, 0xB945, 0xB945, 0xB945, 0xB945,   // 0x0050 (80) pixels
0xA8A3, 0x0000, 0x0000, 0x0800, 0xA0C4, 0x90E4, 0x8104, 0x98E4, 0x78A3, 0x0000, 0x0000, 0xB945, 0xB945, 0xA0C4, 0x0000, 0x0000,   // 0x0060 (96) pixels
0x98C3, 0xB945, 0xB945, 0x1800, 0xB945, 0xB945, 0xB945, 0xB945, 0xB945, 0xB945, 0xB945, 0x0000, 0x0000, 0x90C4, 0xE904, 0x3821,   // 0x0070 (112) pixels
0x0000, 0x0000, 0x0000, 0x7083, 0xE0E5, 0x0000, 0x1020, 0x2020, 0xD905, 0xA0C4, 0x1000, 0xD0E5, 0xB0E4, 0x1000, 0x0000, 0xB0E4,   // 0x0080 (128) pixels
0xE8E4, 0xE0E5, 0x0000, 0x0000, 0xD905, 0xE0E4, 0xE104, 0x1800, 0xC104, 0xC8E4, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0090 (144) pixels
0x0000, 0xA205, 0xF2E5, 0x38A1, 0x0000, 0x0000, 0x0000, 0x0800, 0x1820, 0x0000, 0xA245, 0xE2E6, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x00A0 (160) pixels
0x91E4, 0xE2E5, 0x0000, 0xC244, 0xDAA5, 0x1800, 0xAA45, 0xE2E7, 0x2820, 0xB204, 0xF2C6, 0x1000, 0xD285, 0xF2C5, 0xEAE5, 0xEAC5,   // 0x00B0 (176) pixels
0xEAC5, 0xEAE5, 0x99E5, 0x0000, 0x0000, 0xA2A4, 0xF3C4, 0x38E1, 0x0000, 0x0000, 0x8AC4, 0xA324, 0xA324, 0x0000, 0xAAC4, 0xF3A4,   // 0x00C0 (192) pixels
0xA324, 0xA324, 0xA324, 0xA324, 0xC364, 0xF3C4, 0x0000, 0xC304, 0xE385, 0x0000, 0xB225, 0xEAE6, 0x1820, 0xAAC4, 0xF3A5, 0x1020,   // 0x00D0 (208) pixels
0xD344, 0xE364, 0xAA24, 0xAA24, 0xAA24, 0xAA24, 0x7164, 0x0000, 0x0000, 0xAB45, 0xF4A5, 0x3921, 0x0000, 0x0000, 0xD425, 0xF4A4,   // 0x00E0 (224) pixels
0xF4A3, 0x0000, 0xB364, 0xF4A3, 0xF4A5, 0xF4A5, 0xFCA5, 0xF4A5, 0xF4A4, 0xF4A3, 0x0000, 0xC3C4, 0xE444, 0x0000, 0xAA45, 0xE2E7,   // 0x00F0 (240) pixels
0x1820, 0xAB64, 0xF485, 0x1020, 0xDC05, 0xD425, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xABC7, 0xFD67, 0x3942,   // 0x0100 (256) pixels
0x0000, 0x0000, 0x4143, 0x8B26, 0xFD67, 0x0000, 0xB406, 0xF548, 0x4982, 0x4983, 0x4983, 0x4983, 0xA3A6, 0xFD67, 0x0000, 0xC466,   // 0x0110 (272) pixels
0xED07, 0x0000, 0x3081, 0x40E2, 0x0000, 0xB406, 0xFD68, 0x1020, 0xDCC7, 0xDCC7, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0120 (288) pixels
0x0000, 0x8B26, 0xC488, 0x9CA6, 0xA4C5, 0xA4E5, 0xA4E5, 0xB546, 0xFE46, 0x0000, 0xB4A6, 0xF627, 0x0820, 0x0000, 0x0000, 0x0000,   // 0x0130 (304) pixels
0x9C25, 0xFE46, 0x0000, 0xC506, 0xE5E7, 0x0000, 0x0000, 0x0000, 0x0000, 0xB4A6, 0xF647, 0x1040, 0xDD87, 0xE606, 0xA4E5, 0xA4E5,   // 0x0140 (320) pixels
0xA4E5, 0x9CE5, 0x6B45, 0x0000, 0x0000, 0x0000, 0x0000, 0xEF06, 0xFF64, 0xFF64, 0xFF64, 0xFF64, 0xFF64, 0x0000, 0xBD66, 0xF746,   // 0x0150 (336) pixels
0x0841, 0x0000, 0x0000, 0x0000, 0x9CC5, 0xFF64, 0x0000, 0xC605, 0xEEE6, 0x0000, 0x0000, 0x0000, 0x0000, 0xB586, 0xFF66, 0x1060,   // 0x0160 (352) pixels
0xDE86, 0xFF64, 0xFF64, 0xFF64, 0xFF64, 0xFF84, 0xAD05, 0x0000, 0x0000, 0x0000, 0x0000, 0x5283, 0x52A3, 0x52A3, 0x52A3, 0x52A3,   // 0x0170 (368) pixels
0x52A3, 0x0000, 0x39E3, 0x5284, 0x0000, 0x0000, 0x0000, 0x0000, 0x3182, 0x52A4, 0x0000, 0x4204, 0x4A64, 0x0000, 0x0000, 0x0000,   // 0x0180 (384) pixels
0x0000, 0x39E3, 0x5283, 0x0020, 0x4A43, 0x52A3, 0x52A3, 0x52A3, 0x52A3, 0x52A3, 0x39A3, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0190 (400) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x01A0 (416) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x01B0 (432) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x01C0 (448) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x01D0 (464) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xB945, 0xB945, 0xB945, 0xB945, 0xB945, 0x0000, 0x0000, 0x2842, 0x3882,   // 0x01E0 (480) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x2041, 0x4083, 0x0000, 0x3062, 0x4062, 0x4062, 0x4062, 0x4062, 0x4082, 0x2862, 0x0000, 0x4062,   // 0x01F0 (496) pixels
0x4062, 0x4082, 0x4062, 0x4062, 0x3082, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0800, 0xB146, 0xC125, 0xB945, 0xB945, 0xB945,   // 0x0200 (512) pixels
0x0000, 0x0000, 0x88E4, 0xB945, 0x0000, 0x0000, 0x0000, 0x0000, 0x70C3, 0xC145, 0x0000, 0x9904, 0xC145, 0xC125, 0xC125, 0xC125,   // 0x0210 (528) pixels
0xC145, 0x80E4, 0x0000, 0xC145, 0xB945, 0xC125, 0xC125, 0xB945, 0xA945, 0x0820, 0x0000, 0x0000, 0x0000, 0x70A3, 0xB8C4, 0x70C4,   // 0x0220 (544) pixels
0x70C4, 0x70C4, 0x70C4, 0x80E4, 0xB0C4, 0x0000, 0x98C4, 0xD105, 0x0000, 0x0000, 0x0000, 0x0000, 0x80A3, 0xD905, 0x0000, 0xA8E4,   // 0x0230 (560) pixels
0xC904, 0x70C4, 0x70C4, 0x70C4, 0x70C4, 0x4883, 0x0000, 0xD905, 0x88E4, 0x70C4, 0x70C4, 0x70C4, 0x70E4, 0xB0E4, 0x70A3, 0x0000,   // 0x0240 (576) pixels
0x0000, 0x9904, 0xE944, 0x3840, 0x0000, 0x0000, 0x0000, 0x7883, 0xE944, 0x0000, 0xA0E4, 0xE145, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0250 (592) pixels
0x90E3, 0xE944, 0x0000, 0xB904, 0xD945, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xE944, 0x68C3, 0x0000, 0x0000, 0x0000,   // 0x0260 (608) pixels
0x0000, 0xE944, 0x90E4, 0x0000, 0x0000, 0x9A05, 0xEAC5, 0x38A1, 0x0000, 0x0000, 0x0000, 0x7984, 0xF2C5, 0x0000, 0xAA04, 0xEAC5,   // 0x0270 (624) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x91C4, 0xF2C5, 0x0000, 0xC244, 0xEAC4, 0xEAC5, 0xF2E5, 0xEAC5, 0xEAC5, 0xAA25, 0x0000, 0xF2C5,   // 0x0280 (640) pixels
0x7984, 0x0000, 0x0000, 0x0000, 0x0000, 0xF2C5, 0x99E4, 0x0000, 0x0000, 0xA2C5, 0xF405, 0x38E1, 0x0000, 0x0000, 0x0000, 0x8204,   // 0x0290 (656) pixels
0xF3E4, 0x0000, 0xB2E4, 0xEBE5, 0x0000, 0x0000, 0x0000, 0x0000, 0x9A84, 0xF3E4, 0x0000, 0xC324, 0xEBC5, 0x91E4, 0x99E4, 0x91E4,   // 0x02A0 (672) pixels
0x91E3, 0x6963, 0x0000, 0xF3E4, 0xCBA5, 0xBB85, 0xBB84, 0xB384, 0xAB66, 0x9204, 0x5943, 0x0000, 0x0000, 0xA344, 0xF4A5, 0x3921,   // 0x02B0 (688) pixels
0x0000, 0x0000, 0x0000, 0x7A83, 0xF4A4, 0x0000, 0xA365, 0xEC86, 0x0000, 0x0000, 0x0000, 0x0000, 0x9305, 0xECA6, 0x0000, 0xC3C4,   // 0x02C0 (704) pixels
0xE464, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xFCA4, 0xF485, 0xEC86, 0xEC86, 0xEC86, 0xDC48, 0x0000, 0x0000, 0x0000,   // 0x02D0 (720) pixels
0x0000, 0xABE7, 0xFD88, 0x3942, 0x0000, 0x0000, 0x0000, 0x8305, 0xFD67, 0x0000, 0x0000, 0x0000, 0xED69, 0xB428, 0x0000, 0xE528,   // 0x02E0 (736) pixels
0xC487, 0x0000, 0x0000, 0xCC67, 0xE527, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xF587, 0x82E6, 0x0000, 0x0000, 0x0000,   // 0x02F0 (752) pixels
0x0000, 0xF569, 0x9BC7, 0x0000, 0x0000, 0x72E6, 0xAC07, 0xFF66, 0xFF66, 0xFF66, 0xFF66, 0xFF66, 0xB407, 0x0000, 0x0000, 0x0820,   // 0x0300 (768) pixels
0xAC08, 0xAC07, 0xFF66, 0xAC28, 0x8B67, 0x0000, 0x0000, 0xAC07, 0xFF66, 0xFF66, 0xFF66, 0xFF66, 0xFF66, 0xFF66, 0x0000, 0xFF66,   // 0x0310 (784) pixels
0xAC07, 0x0000, 0x0000, 0x0000, 0x0000, 0xFF66, 0xAC07, 0x0000, 0x0000, 0x0000, 0x0000, 0xFF66, 0xFF66, 0xFF66, 0xFF66, 0xFF66,   // 0x0320 (800) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xFF66, 0xFF66, 0x4A65, 0x0000, 0x0000, 0x0000, 0xFF66, 0xFF66, 0x4204, 0x4204, 0x4204,   // 0x0330 (816) pixels
0xFF66, 0xFF66, 0x0000, 0xFF66, 0xFF66, 0x0000, 0x0000, 0x0000, 0x0000, 0xFF66, 0xFF66, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0340 (832) pixels
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0820, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,   // 0x0350 (848) pixels
0x0000, 0x0820, 0x0820, 0x0820, 0x0820, 0x0820, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0021, 0x0000, 0x0000, 0x0000,   // 0x0360 (864) pixels
};

static int start = 0;
int posNaveE = 168;
int posNaveE2 = 168;
int posNaveE3 = 168;
int posDisparo = 45;
int posNave1 = 0;
int vidas = 3;
int disparo = 0;
int juegoIniciado = 0;
static int gameOver = 0;
int disparoX = 0;
int nivel = 0;
int navesMuertas = 0;
int nave2Muerta = 0;
int nave3Muerta = 0;
void disparar(void){
	if(disparo == 0){
		posNave1 = getPosNave1();
		disparoX = posNave1 + 16;
		disparo++;
	}
}
static void busy_wait(unsigned int ds)
{
	timer0_en_write(0);
	timer0_reload_write(0);
	timer0_load_write(SYSTEM_CLOCK_FREQUENCY/100*ds);
	timer0_en_write(1);
	timer0_update_value_write(1);
	while(timer0_value_read()) timer0_update_value_write(1);
}


static char *readstr(void)
{
	char c[2];
	static char s[64];
	static int ptr = 0;

	if(readchar_nonblock()) {
		c[0] = readchar();
		c[1] = 0;
		switch(c[0]) {
			case 0x7f:
			case 0x08:
				if(ptr > 0) {
					ptr--;
					putsnonl("\x08 \x08");
				}
				break;
			case 0x07:
				break;
			case '\r':
			case '\n':
				s[ptr] = 0x00;
				putsnonl("\n");
				ptr = 0;
				return s;
			default:
				if(ptr >= (sizeof(s) - 1))
					break;
				putsnonl(c);
				s[ptr] = c[0];
				ptr++;
				break;
		}
	}

	return NULL;
}

static char *get_token(char **str)
{
	char *c, *d;

	c = (char *)strchr(*str, ' ');
	if(c == NULL) {
		d = *str;
		*str = *str+strlen(*str);
		return d;
	}
	*c = 0;
	d = *str;
	*str = c+1;
	return d;
}

static void prompt(void)
{
	printf("RUNTIME>");
}

static void help(void)
{
	puts("Available commands:");
	puts("help                            - this command");
	puts("reboot                          - reboot CPU");
	puts("sdtest   - SDCard test");
	puts("game  -  gameTest");
									  		

}

static void reboot(void)
{
	asm("call r0");
}
void iniciarJuego(void)
{
	juegoIniciado++;
}


static void ponerTitulo(void){
	int pY = 130;
	int pX = 10;
	int tam = 5;

	leerBloque();
	uint8_t* data;
	data = leerNombre();

	int p = 1;
	for(int i=0;i<9;i++){	
		p = 16;
		for(int j=0;j<5;j++){
			if( (data[i] & p) == p){
			     dibujarTileColor(BLANCO,pX+tam*j,pY-tam*i,tam);
			}
			if( (data[i+9] & p) == p){
			     dibujarTileColor(BLANCO,(pX + 35)+tam*j,pY-tam*(i),tam);
			}
			if( (data[i+18] & p) == p){
			     dibujarTileColor(BLANCO,(pX + 70)+tam*j,pY-tam*(i),tam);
			}
			if( (data[i+27] & p) == p){
			     dibujarTileColor(BLANCO,(pX + 105)+tam*j,pY-tam*(i),tam);
			}
			if( (data[i+36] & p) == p){
			     dibujarTileColor(BLANCO,(pX + 140)+tam*j,pY-tam*(i),tam);
			}
			if( (data[i+45] & p) == p){
			     dibujarTileColor(BLANCO,(pX + 175)+tam*j,pY-tam*(i),tam);
			}
			p = p/2;
		}	
	}
  	
}
static void gameTest(void){
     if(start==0){
	     int* P[9][5] = {{1,1,1,1,1},
		     {1,0,0,0,1},		
		     {1,0,0,0,1},
		     {1,0,0,0,1},
		     {1,1,1,1,1},
  	             {1,0,0,0,0},
		     {1,0,0,0,0},
                     {1,0,0,0,0},
	             {1,0,0,0,0} };
	     int* A[9][5] = {{1,1,1,1,1},
		     {1,0,0,0,1},		
		     {1,0,0,0,1},
		     {1,0,0,0,1},
		     {1,1,1,1,1},
  	             {1,0,0,0,1},
		     {1,0,0,0,1},
                     {1,0,0,0,1},
	             {1,0,0,0,1} };
             int* R[9][5] = {{1,1,1,1,1},
		     {1,0,0,0,1},		
		     {1,0,0,0,1},
		     {1,0,0,0,1},
		     {1,1,1,1,1},
  	             {1,1,0,0,0},
		     {1,0,1,0,0},
                     {1,0,0,1,0},
	             {1,0,0,0,1} };
             int* E[9][5] = {{1,1,1,1,1},
		     {1,0,0,0,0},		
		     {1,0,0,0,0},
		     {1,0,0,0,0},
		     {1,1,1,1,1},
  	             {1,0,0,0,0},
		     {1,0,0,0,0},
                     {1,0,0,0,0},
	             {1,1,1,1,1} };
             int* S[9][5] = {{1,1,1,1,1},
		     {1,0,0,0,0},		
		     {1,0,0,0,0},
		     {1,0,0,0,0},
		     {1,1,1,1,1},
  	             {0,0,0,0,1},
		     {0,0,0,0,1},
                     {0,0,0,0,1},
	             {1,1,1,1,1} };
             int* T[9][5]={{1,1,1,1,1},
		     {0,0,1,0,0},		
		     {0,0,1,0,0},
		     {0,0,1,0,0},
		     {0,0,1,0,0},
  	             {0,0,1,0,0},
		     {0,0,1,0,0},
                     {0,0,1,0,0},
	             {0,0,1,0,0} };
             int* B[9][5]={{1,1,1,1,0},
		     {1,0,0,0,1},		
		     {1,0,0,0,1},
		     {1,0,0,1,0},
		     {1,1,1,0,0},
  	             {1,0,0,1,0},
		     {1,0,0,0,1},
                     {1,0,0,0,1},
	             {1,1,1,1,0} };
             int* U[9][5]={{1,0,0,0,1},
		     {1,0,0,0,1},		
		     {1,0,0,0,1},
		     {1,0,0,0,1},
		     {1,0,0,0,1},
  	             {1,0,0,0,1},
		     {1,0,0,0,1},
                     {1,0,0,0,1},
	             {1,1,1,1,1} };
             int* O[9][5]={{1,1,1,1,1},
		     {1,0,0,0,1},		
		     {1,0,0,0,1},
		     {1,0,0,0,1},
		     {1,0,0,0,1},
  	             {1,0,0,0,1},
		     {1,0,0,0,1},
                     {1,0,0,0,1},
	             {1,1,1,1,1} };
             int* N[9][5]={{1,0,0,0,1},
		     {1,1,0,0,1},		
		     {1,1,0,0,1},
		     {1,0,1,0,1},
		     {1,0,1,0,1},
  	             {1,0,0,1,1},
		     {1,0,0,1,1},
                     {1,0,0,1,1},
	             {1,0,0,0,1} };

		sdInit();
		lcd_init();
		colorFondo(NEGRO);
		ponerTitulo();
		int pX = 20;
		int pY = 70;
		int tam = 2;
		for (int i=0;i<9;i++){
			for(int j = 0;j<5;j++){
				if( P[i][j] == 1 ){
					dibujarTileColor(BLANCO,pX+tam*j,pY-tam*i,tam);
				}
				if( R[i][j] == 1 ){
					dibujarTileColor(BLANCO,(pX + 18)+tam*j,pY-tam*i,tam);
					dibujarTileColor(BLANCO,(pX + 154)+tam*j,pY-tam*i,tam);
			}
			if( E[i][j] == 1 ){
				dibujarTileColor(BLANCO,(pX + 36)+tam*j,pY-tam*i,tam);
			}
			if( S[i][j] == 1 ){
				dibujarTileColor(BLANCO,(pX + 54)+tam*j,pY-tam*i,tam);
				dibujarTileColor(BLANCO,(pX + 72)+tam*j,pY-tam*i,tam);
				dibujarTileColor(BLANCO,(pX + 100)+tam*j,pY-tam*i,tam);
			}
			if( T[i][j] == 1 ){
				dibujarTileColor( BLANCO,(pX + 118)+tam*j,pY-tam*i,tam);
				dibujarTileColor(BLANCO,(pX + 172)+tam*j,pY-tam*i,tam);
				dibujarTileColor(BLANCO,(pX + 82)+tam*j,(pY-26)-tam*i,tam);			
				dibujarTileColor(BLANCO,(pX + 98)+tam*j,(pY-26)-tam*i,tam);			
			}
			if( A[i][j] == 1 ){
				dibujarTileColor(BLANCO,(pX + 136)+tam*j,pY-tam*i,tam);
			}
			if( B[i][j] == 1 ){
				dibujarTileColor(BLANCO,(pX + 48)+tam*j,(pY-26)-tam*i,tam);
			}
			if( U[i][j] == 1 ){
				dibujarTileColor(BLANCO,(pX + 66)+tam*j,(pY-26)-tam*i,tam);
			}
			if(O[i][j] == 1 ){
				dibujarTileColor(BLANCO,(pX + 114)+tam*j,(pY-26)-tam*i,tam);
			}
			if(N[i][j] == 1 ){
				dibujarTileColor(BLANCO,(pX + 130)+tam*j,(pY-26)-tam*i,tam);
			}	
		}
	   }
	}
	buttons_ev_pending_write(0xFF);
	buttons_ev_enable_write(0xFF);
	irq_setmask(irq_getmask() | ( 1<<4));

}
static void over(void){
	colorFondo(NEGRO);
	dibujarImagen(g_over,110-18,88+12,36,24);
}
static void verificarCorazones(void){
	if(vidas == 2){
			dibujarCorazon(5,165,1);
			dibujarCorazon(5,150,1);
        }
	if(vidas == 1){
			dibujarCorazon(5,165,1);
        }
	if(vidas == 0){
		gameOver = 1;
		over(); 
        }
}
static void console_service(void)
{
	char *str;
	char *token;

	str = readstr();
	if(str == NULL) return;
	token = get_token(&str);
	if(strcmp(token, "help") == 0)
		help();
	else if(strcmp(token, "reboot") == 0)
		reboot();
	else if(strcmp(token, "sdtest") == 0){
		spiSDInit();
		sdInit();
		//escribirNave1();
		//printf("AAA");
		//leerBloque();
		//escribirBloque( 0x00,0x00000000);		
		//leerBloque (0x00000000);
	}
	else if(strcmp(token, "game") == 0){
		gameTest();
	}
	prompt();
}

void aumentarNivel(void){
	nivel++;
}

void dibujarNivel2(void){
	borrarImagen(97,posNaveE-13,31,29);
	posNaveE2 = 168;
	dibujarImagen(nave2,50,posNaveE2,41,24);
	posNaveE3 = 168;
	dibujarImagen(nave3,150,posNaveE3,35,33);

}

int main(void)
{
	irq_setmask(0);
	irq_setie(1); //habilita las interrupciones
	uart_init();
	puts("\nTEST PROYECTO FINAL  "__DATE__" "__TIME__"\n");
	while(gameOver==0) {
		//printf("%i \n",buttons_in_read());
		//console_service();
		if(start == 0){
			vidas = 3;
			gameTest();
			start++;
		}else if (start == 1 && juegoIniciado >0 ){
			if(nivel == 1){	
				dibujarTileColor(NEGRO,75,posNaveE,66);
				dibujarNave2(75,posNaveE,1);
				posNaveE = posNaveE - 3;
				posNave1 = getPosNave1();
				if(posNaveE <= 35 && (  posNave1 >= 75 && posNave1 <= 66+75  ) ){
					vidas --;
					disparo = 0;
					posDisparo = 45;
					colorFondo(NEGRO);
					if(vidas > 0){		
						dibujarNave2(75,168,1);
						dibujarNave1(88,35,2);
					}
					posNaveE = 168;
					posNave1 = 88;
				}
				if(posNaveE < 0){
					posNaveE = 168;
				}	
				if (( posDisparo <= posNaveE && posDisparo >= posNaveE-27) && ( disparoX >= 75 && disparoX <= 66 + 75) ){
					borrarImagen(75,posNaveE+5,66,30);	
					dibujarImagen(exp,97,posNaveE-13,31,29);
					busy_wait(1);		
					aumentarNivel();
					disparo = 0;
					posDisparo = 45;
					if(nivel == 2){
						dibujarNivel2();
					}		
				}
			}
			if(nivel == 2){	
				if(nave2Muerta == 0){
					dibujarTileColor(NEGRO,50,posNaveE2,42);
					dibujarImagen(nave2,50,posNaveE2,41,24);
					posNaveE2 = posNaveE2 - 3;
				}
				if(nave3Muerta == 0){
					dibujarTileColor(NEGRO,150,posNaveE3,36);
					dibujarImagen(nave3,150,posNaveE3,35,33);
					posNaveE3 = posNaveE3 - 3;
				}				
				posNave1 = getPosNave1();
				if( (posNaveE2 <= 35 && (  posNave1 >= 50 && posNave1 <= 50+41)) || (posNaveE3 <= 35 && (  posNave1 >= 150 && posNave1 <= 150+35))){
					vidas --;
					disparo = 0;
					posDisparo = 45;
					colorFondo(NEGRO);
					if(vidas > 0){		
						dibujarNivel2();
						dibujarNave1(88,35,2);
					}
					posNave1 = 88;
				}
				if(posNaveE2 < 0){
					posNaveE2 = 168;
				}
				if(posNaveE3 < 0){
					posNaveE3 = 168;
				}
				if (( posDisparo <= posNaveE2 && posDisparo >= posNaveE2-24) && ( disparoX >= 50 && disparoX <=  50+41) ){
					borrarImagen(50,posNaveE2+5,41,24);	
	 				dibujarImagen(exp,55,posNaveE2-13,31,29);
					disparo = 0;
					posDisparo = 45;
					busy_wait(1);	
					nave2Muerta = 1;	
					navesMuertas++;		
				}
				if (( posDisparo <= posNaveE3 && posDisparo >= posNaveE3-33) && ( disparoX >= 150 && disparoX <=  150+35) ){
					borrarImagen(150,posNaveE3+5,35,33);	
	 				dibujarImagen(exp,158,posNaveE3-13,31,29);
					disparo = 0;
					posDisparo = 45;
					busy_wait(1);	
					nave3Muerta = 1;	
					navesMuertas++;		
				}
				if(nave2Muerta==1 &&  nave3Muerta==1){	
					busy_wait(1);	
					return 0;
				}
				
			}
			if(disparo == 1){
				dibujarTileColor(NEGRO,disparoX,posDisparo,8);
				if(posDisparo > 176){
					disparo = 0;
					posDisparo = 45;
				}else{
					posDisparo = posDisparo + 3;
					dibujarTileColor(ROJO,disparoX,posDisparo,8);
				}
			}

			verificarCorazones();
			busy_wait(1);		
		}

	}
	return 0;
}

